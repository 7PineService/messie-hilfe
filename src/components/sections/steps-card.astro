---
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'
import { cn } from '@/utils/cn'

interface Props {
  key: number
  title: string
  classes?: string
  description: string
  subDescription: string
  image: ImageMetadata
}
const { key, title, classes, description, subDescription, image } = Astro.props
---

<>
  <!-- steps-card -->
  <div
    class={cn(
      classes,
      'steps-card relative hidden md:flex flex-col items-center text-center justify-between gap-2 transition px-4 md:px-8 lg:px-4 xl:px-8 py-8'
    )}
  >
    <div
      class="w-[3.5rem] aspect-square absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full shadow-md flex items-center justify-center text-xl md:text-2xl font-semibold bg-(--color-cta-tertiary)"
    >
      {`0${key + 1}`}
    </div>
    <h4
      class="md:text-xl lg:text-lg xl:text-xl 2xl:text-2xl min-[1920px]:text-3xl font-semibold leading-tight mb-2"
    >
      {title}
    </h4>
    <div
      class="text-xs md:text-sm xl:text-base 2xl:text-lg min-[1920px]:text-xl opacity-80 leading-relaxed drop-shadow-[2px_16px_20px_#aa600e]"
    >
      {description}
    </div>
    <div class="w-full">
      <Image src={image} alt={title} loading="eager" class={'mx-auto'} />
    </div>
    <div
      class="text-sm md:text-base xl:text-lg 2xl:text-xl min-[1920px]:text-2xl opacity-80 leading-relaxed drop-shadow-[2px_16px_20px_#aa600e]"
    >
      {subDescription}
    </div>
  </div>

  <!-- steps-card-mobile -->
  <div
    class="steps-card-mobile md:hidden grid grid-cols-5 transition rounded-lg p-0"
  >
    <div
      class="card-img relative col-span-2 flex justify-center transition rounded-l-lg p-4"
    >
      <div
        class="w-8 aspect-square absolute top-2 left-1/2 -translate-x-1/2 rounded-full shadow-md flex items-center justify-center text-base font-semibold bg(--color-cta-tertiary) z-10 border border-(--color-border-primary)"
      >
        {`0${key + 1}`}
      </div>
      <Image
        class="translate-y-4 object-contain"
        src={image}
        alt={title}
        loading="eager"
      />
    </div>
    <div class="col-span-3 flex flex-col items-start gap-2 p-3 pr-2 sm:p-4">
      <h4
        class="text-sm sm:text-lg md:text-xl font-semibold leading-tight sm:mb-2 drop-shadow-[2px_16px_20px_#aa600e]"
      >
        {title}
      </h4>
      <div
        class="text-[10px] sm:text-sm tracking-tighter sm:tracking-normal opacity-80 leading-relaxed drop-shadow-[2px_16px_20px_#aa600e]"
      >
        {description}
      </div>
    </div>
  </div>
</>

<style>
  .steps-card {
    background: var(--color-surface-light-peach);
    box-shadow: var(--color-shadow-warm) 0px 2px 8px 0px;
  }
  .steps-card-mobile {
    background: var(--color-surface-light-peach);
    box-shadow: var(--color-shadow-subtle) 0px 2px 8px 0px;
  }

  .steps-card:first-child {
    border-radius: 10px 0 0 10px;
  }
  .steps-card:nth-child(7) {
    border-radius: 0 10px 10px 0;
  }

  .steps-card-mobile > .card-img {
    background: var(--color-surface-gradient-light);
  }

  .steps-card:hover,
  .steps-card-mobile:hover {
    background: var(--color-surface-warm-peach);
    box-shadow:
      var(--color-shadow-warm) 1px 0px 2px 2px,
      var(--color-shadow-warm) -7px 0px 2px -4px,
      var(--color-shadow-warm) 1px 2px 2px 2px;
    z-index: 1;
  }

  .steps-card:hover .cta-tertiary,
  .steps-card-mobile:hover .cta-tertiary {
    background-color: var(--color-primary);
    color: white;
  }

  .steps-card-mobile:hover > .card-img {
    background: var(--color-surface-gradient-warm);
  }
</style>
