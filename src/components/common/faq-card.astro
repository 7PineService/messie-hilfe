---
import { cn } from '@/utils/cn'
import { Image } from 'astro:assets'
import { Chevron } from '@/components/icons'
import type { ImageMetadata } from 'astro'

interface Props {
  title: string
  description: string
  image: ImageMetadata
  classes?: string
}

const { title, description, image, classes } = Astro.props
---

<>
  <div
    class={cn(
      classes,
      'faq-card hidden md:flex relative gap-2 transition rounded-xl shadow-lg'
    )}
  >
    <div class="w-[30%] shrink-0 flex items-center">
      <Image
        src={image}
        alt={title}
        loading="eager"
        decoding="async"
        class="w-auto mx-auto object-contain scale-120 translate-x-2"
      />
    </div>
    <div class="py-2 lg:py-4 px-2 flex flex-col justify-center">
      <h4
        class="md:text-base lg:text-lg min-[1920px]:text-3xl font-semibold leading-tight mb-2"
      >
        {title}
      </h4>
      <div
        class="w-fit relative flex gap-1 md:text-sm lg:text-sm min-[1920px]:text-xl opacity-80 leading-relaxed"
      >
        {description}
      </div>
    </div>
  </div>

  <div
    class={cn(
      classes,
      'faq-card-mobile md:hidden bg-warm-400 rounded-xl shadow-sm overflow-hidden pr-4'
    )}
  >
    <button
      onclick="const el = this.nextElementSibling;el.classList.toggle('grid-rows-[1fr]');el.classList.toggle('py-3');this.classList.toggle('border-b');this.classList.toggle('border-[var(--color-outline-30)]'); this.querySelector('svg').classList.toggle('rotate-0')"
      class="w-full flex items-center justify-between py-1 pr-1"
    >
      <span class="w-[20%] sm:w-[14%] shrink-0"
        ><Image
          src={image}
          alt={title}
          loading="eager"
          decoding="async"
          class={'w-auto mx-auto object-contain scale-110'}
        /></span
      >
      <span
        class="flex-1 text-start text-xs min-[426px]:text-sm sm:text-base font-semibold leading-tight py-2 pr-2"
        >{title}</span
      >

      <span class={``}>
        <Chevron class="transition-all duration-300 -rotate-90" />
      </span>
    </button>

    <div class={`grid transition-all duration-300 ease-in-out grid-rows-[0fr]`}>
      <div
        class="overflow-hidden opacity-80 text-xs min-[426px]:text-sm sm:text-base pr-6 pl-[20%] sm:pl-[14%]"
      >
        {description}
      </div>
    </div>
  </div>
</>
<style>
  .faq-card {
    background: var(--color-warm-25);
  }

  .faq-card:hover {
    background: var(--color-warm-150);
    box-shadow:
      var(--shadow-peach) 1px 0px 2px 2px,
      var(--shadow-peach) -7px 0px 2px -4px,
      var(--shadow-peach) 1px 2px 2px 2px;
  }

  .faq-card:hover .cta-tertiary {
    background-color: var(--color-foreground);
    color: white;
  }
</style>
