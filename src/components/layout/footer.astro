---
import { CONTACT_EMAIL, CONTACT_PHONE, CONTACT_PHONE_DISPLAY, CONTACT_WHATSAPP, SITE_NAME } from '@/config/site';
import { Phone, WhatsApp, Chevron } from '@/components/icons';
---

<footer>
	<!-- Upper Footer Section - Gradient background with logo and intro text -->
	<div class="py-8 md:py-16" style="background: linear-gradient(to bottom, #EFDFD9, #BEA89D);">
		<div class="container mx-auto px-4">
			<div class="max-w-2xl mx-auto text-center space-y-4">
				<!-- Logo -->
				<div class="flex items-center justify-center space-x-2">
					<img src="/logo.svg" alt={`${SITE_NAME} Logo`} class="h-16 w-16 object-contain" />
				</div>
				<!-- Brand Name -->
				<h2 class="text-2xl md:text-3xl font-bold">{SITE_NAME}</h2>
				<!-- Intro Text -->
				<p class="text-sm md:text-base leading-relaxed opacity-90">
					Wir unterst√ºtzen Betroffene, Angeh√∂rige und Institutionen dabei, belastende Situationen diskret, respektvoll und verl√§sslich zu l√∂sen.
				</p>
			</div>
		</div>
	</div>

	<!-- Main Footer Section - Dark brown background with 3 columns -->
	<div class="py-8 md:py-16" style="background-color: #463324;">
		<div class="container mx-auto px-4">
			<!-- Desktop: 3 Column Grid -->
			<div class="hidden md:grid md:grid-cols-3 gap-8 lg:gap-12">
				<!-- Column 1: Leistungen (Services) -->
				<div>
					<h3 class="text-white font-semibold text-lg mb-4">Leistungen</h3>
					<ul class="space-y-2.5">
						<li>
							<a href="/leistungen/messie-reinigung" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
								<span class="opacity-70">‚Ä∫</span> Messie-Reinigung
							</a>
						</li>
						<li>
							<a href="/leistungen/entsorgung" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
								<span class="opacity-70">‚Ä∫</span> Entsorgung
							</a>
						</li>
						<li>
							<a href="/leistungen/entruempelung" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
								<span class="opacity-70">‚Ä∫</span> Entr√ºmpelung
							</a>
						</li>
						<li>
							<a href="/leistungen/desinfektion" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
								<span class="opacity-70">‚Ä∫</span> Desinfektion
							</a>
						</li>
						<li>
							<a href="/leistungen/malerarbeiten" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
								<span class="opacity-70">‚Ä∫</span> Malerarbeiten
							</a>
						</li>
						<li>
							<a href="/leistungen/renovierung" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
								<span class="opacity-70">‚Ä∫</span> Renovierung
							</a>
						</li>
					</ul>
				</div>

				<!-- Column 2: Wichtiges (Important) -->
				<div>
					<h3 class="text-white font-semibold text-lg mb-4">Wichtiges</h3>
					<ul class="space-y-2.5">
						<li>
							<a href="/" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
								<span class="opacity-70">‚Ä∫</span> Startseite
							</a>
						</li>
						<li>
							<a href="/ueber-uns" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
								<span class="opacity-70">‚Ä∫</span> √úber uns
							</a>
						</li>
						<li>
							<a href="/kontakt" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
								<span class="opacity-70">‚Ä∫</span> Kontakt
							</a>
						</li>
					</ul>
				</div>

				<!-- Column 3: Kontakt (Contact) -->
				<div>
					<h3 class="text-white font-semibold text-lg mb-4">Kontakt</h3>
					<div class="space-y-2.5">
						<a href={`mailto:${CONTACT_EMAIL}`} class="block text-white hover:opacity-80 transition-colors text-sm">
							{CONTACT_EMAIL}
						</a>
						<a href={`tel:${CONTACT_PHONE}`} class="flex items-center gap-2 text-white hover:opacity-80 transition-colors text-sm" data-gtm-event="contact_call">
							<Phone size="xs" aria-hidden={true} />
							{CONTACT_PHONE_DISPLAY}
						</a>
						<a href={`https://wa.me/${CONTACT_WHATSAPP}`} target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-10 h-10 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors mt-2" aria-label="WhatsApp Nachricht senden" data-gtm-event="contact_whatsapp">
							<WhatsApp size="md" aria-hidden={true} />
						</a>
					</div>
				</div>
			</div>

			<!-- Mobile: Accordion Sections -->
			<div class="md:hidden space-y-3">
				<!-- Leistungen Accordion -->
				<div class="border-b border-white/20">
					<button
						id="footer-services-toggle"
						class="w-full flex items-center justify-between py-3 text-white"
						aria-expanded="false"
						aria-controls="footer-services-menu"
					>
						<span class="font-semibold text-lg">Leistungen</span>
						<Chevron direction="right" size="sm" class="transform transition-transform duration-300" aria-hidden={true} />
					</button>
					<div
						id="footer-services-menu"
						class="overflow-hidden transition-all duration-300 ease-in-out"
						style="max-height: 0;"
						aria-hidden="true"
					>
						<ul class="pb-4 space-y-2.5">
							<li>
								<a href="/leistungen/messie-reinigung" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
									<span class="opacity-70">‚Ä∫</span> Messie-Reinigung
								</a>
							</li>
							<li>
								<a href="/leistungen/entsorgung" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
									<span class="opacity-70">‚Ä∫</span> Entsorgung
								</a>
							</li>
							<li>
								<a href="/leistungen/entruempelung" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
									<span class="opacity-70">‚Ä∫</span> Entr√ºmpelung
								</a>
							</li>
							<li>
								<a href="/leistungen/desinfektion" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
									<span class="opacity-70">‚Ä∫</span> Desinfektion
								</a>
							</li>
							<li>
								<a href="/leistungen/malerarbeiten" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
									<span class="opacity-70">‚Ä∫</span> Malerarbeiten
								</a>
							</li>
							<li>
								<a href="/leistungen/renovierung" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
									<span class="opacity-70">‚Ä∫</span> Renovierung
								</a>
							</li>
						</ul>
					</div>
				</div>

				<!-- Wichtiges Accordion -->
				<div class="border-b border-white/20">
					<button
						id="footer-important-toggle"
						class="w-full flex items-center justify-between py-3 text-white"
						aria-expanded="false"
						aria-controls="footer-important-menu"
					>
						<span class="font-semibold text-lg">Wichtiges</span>
						<Chevron direction="right" size="sm" class="transform transition-transform duration-300" aria-hidden={true} />
					</button>
					<div
						id="footer-important-menu"
						class="overflow-hidden transition-all duration-300 ease-in-out"
						style="max-height: 0;"
						aria-hidden="true"
					>
						<ul class="pb-4 space-y-2.5">
							<li>
								<a href="/" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
									<span class="opacity-70">‚Ä∫</span> Startseite
								</a>
							</li>
							<li>
								<a href="/ueber-uns" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
									<span class="opacity-70">‚Ä∫</span> √úber uns
								</a>
							</li>
							<li>
								<a href="/kontakt" class="text-white hover:opacity-80 transition-colors text-sm flex items-center gap-2">
									<span class="opacity-70">‚Ä∫</span> Kontakt
								</a>
							</li>
						</ul>
					</div>
				</div>

				<!-- Kontakt Section (Always Visible on Mobile) -->
				<div class="pt-2">
					<h3 class="text-white font-semibold text-lg mb-4">Kontakt</h3>
					<div class="space-y-2.5">
						<a href={`mailto:${CONTACT_EMAIL}`} class="block text-white hover:opacity-80 transition-colors text-sm">
							{CONTACT_EMAIL}
						</a>
						<a href={`tel:${CONTACT_PHONE}`} class="flex items-center gap-2 text-white hover:opacity-80 transition-colors text-sm" data-gtm-event="contact_call">
							<Phone size="xs" aria-hidden={true} />
							{CONTACT_PHONE_DISPLAY}
						</a>
						<a href={`https://wa.me/${CONTACT_WHATSAPP}`} target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-10 h-10 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors mt-2" aria-label="WhatsApp Nachricht senden" data-gtm-event="contact_whatsapp">
							<WhatsApp size="md" aria-hidden={true} />
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Bottom Footer Section - Light tan background with legal links -->
	<div class="py-4" style="background-color: #DFCABB;">
		<div class="container mx-auto px-4">
			<div class="flex flex-wrap items-center justify-center gap-2 md:gap-3 text-xs md:text-sm">
				<a href="/kein-datenhandel/" class="hover:opacity-80 transition-colors">Kein Datenhandel</a>
				<span class="hidden md:inline opacity-50">¬∑</span>
				<a href="/impressum/" class="hover:opacity-80 transition-colors">Impressum</a>
				<span class="hidden md:inline opacity-50">¬∑</span>
				<a href="/agb/" class="hover:opacity-80 transition-colors">AGB</a>
				<span class="hidden md:inline opacity-50">¬∑</span>
				<a href="/datenschutz/" class="hover:opacity-80 transition-colors">Datenschutz</a>
				<span class="hidden md:inline opacity-50">¬∑</span>
				<a href="/widerruf/" class="hover:opacity-80 transition-colors">Widerruf</a>
				<span class="hidden md:inline opacity-50">¬∑</span>
				<button type="button" class="cky-banner-element hover:opacity-80 transition-colors cursor-pointer">Cookies</button>
				<span class="hidden md:inline opacity-50">¬∑</span>
				<span class="flex items-center gap-1">
					Webdesign: ChatGPT ü§ç
				</span>
			</div>
		</div>
	</div>
</footer>

<!-- Mobile Accordion JavaScript -->
<script>
	document.addEventListener('DOMContentLoaded', () => {
		// Footer accordion functionality
		const servicesToggle = document.getElementById('footer-services-toggle');
		const servicesMenu = document.getElementById('footer-services-menu');
		const importantToggle = document.getElementById('footer-important-toggle');
		const importantMenu = document.getElementById('footer-important-menu');

		function toggleAccordion(button: HTMLElement | null, menu: HTMLElement | null) {
			if (!button || !menu) return;

			const isExpanded = button.getAttribute('aria-expanded') === 'true';
			const chevron = button.querySelector('svg');

			if (isExpanded) {
				// Collapse
				button.setAttribute('aria-expanded', 'false');
				menu.setAttribute('aria-hidden', 'true');
				menu.style.maxHeight = '0px';
				chevron?.classList.remove('rotate-0');
			} else {
				// Expand
				button.setAttribute('aria-expanded', 'true');
				menu.setAttribute('aria-hidden', 'false');
				menu.style.maxHeight = menu.scrollHeight + 'px';
				chevron?.classList.add('rotate-0');
			}
		}

		servicesToggle?.addEventListener('click', () => {
			toggleAccordion(servicesToggle, servicesMenu);
		});

		importantToggle?.addEventListener('click', () => {
			toggleAccordion(importantToggle, importantMenu);
		});
	});
</script>


<!-- Schema.org Structured Data for Footer -->
<script type="application/ld+json" set:html={JSON.stringify({
	"@context": "https://schema.org",
	"@type": "Service",
	"serviceType": "Entr√ºmpelung und Aufr√§umservice",
	"provider": {
		"@type": "LocalBusiness",
		"name": SITE_NAME,
		"telephone": CONTACT_PHONE,
		"email": CONTACT_EMAIL,
		"address": {
			"@type": "PostalAddress",
			"addressCountry": "DE"
		}
	},
	"areaServed": {
		"@type": "Country",
		"name": "Germany"
	},
	"hasOfferCatalog": {
		"@type": "OfferCatalog",
		"name": `${SITE_NAME} Leistungen`,
		"itemListElement": [
			{
				"@type": "Offer",
				"itemOffered": {
					"@type": "Service",
					"name": "Messie-Reinigung"
				}
			},
			{
				"@type": "Offer",
				"itemOffered": {
					"@type": "Service",
					"name": "Entsorgung"
				}
			},
			{
				"@type": "Offer",
				"itemOffered": {
					"@type": "Service",
					"name": "Entr√ºmpelung"
				}
			},
			{
				"@type": "Offer",
				"itemOffered": {
					"@type": "Service",
					"name": "Desinfektion"
				}
			},
			{
				"@type": "Offer",
				"itemOffered": {
					"@type": "Service",
					"name": "Malerarbeiten"
				}
			},
			{
				"@type": "Offer",
				"itemOffered": {
					"@type": "Service",
					"name": "Renovierung"
				}
			}
		]
	}
})} />
