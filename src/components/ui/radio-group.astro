---
import { cn } from '@/utils/cn';

interface Option {
	value: string;
	label: string;
}

interface Props {
	name: string;
	options: Option[];
	value?: string;
	required?: boolean;
	disabled?: boolean;
	class?: string;
	[key: string]: any;
}

const {
	name,
	options,
	value,
	required = false,
	disabled = false,
	class: className = '',
	...rest
} = Astro.props;

const baseClasses = 'flex flex-col gap-3';
const labelClasses = 'text-sm cursor-pointer';
---

<div
	class={cn(baseClasses, className)}
	role="radiogroup"
	data-radio-group={name}
	{...rest}
>
	{options.map((option) => (
		<label class={cn('flex items-center gap-3 cursor-pointer', disabled && 'opacity-50 cursor-not-allowed')}>
			<input
				type="radio"
				name={name}
				value={option.value}
				checked={value === option.value}
				required={required}
				disabled={disabled}
				class="radio-input"
			/>
			<span class={labelClasses}>{option.label}</span>
		</label>
	))}
</div>

<style>
	.radio-input {
		appearance: none;
		width: 1.25rem;
		height: 1.25rem;
		border: 2px solid rgba(212, 186, 165, 0.5);
		border-radius: 50%;
		background: white;
		cursor: pointer;
		position: relative;
		flex-shrink: 0;
		transition: all 0.2s;
	}

	.radio-input:hover {
		border-color: var(--color-cta-primary);
	}

	.radio-input:checked {
		border-color: var(--color-cta-primary);
		background: var(--color-cta-primary);
	}

	.radio-input:checked::after {
		content: '';
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 0.5rem;
		height: 0.5rem;
		border-radius: 50%;
		background: white;
	}

	.radio-input:focus-visible {
		outline: 2px solid var(--color-border-primary);
		outline-offset: 2px;
	}
</style>
