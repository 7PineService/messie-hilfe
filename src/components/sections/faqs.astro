---
import { SectionCTA, FAQCard } from '@/components/common'
import type { ImageMetadata } from 'astro'
import faqImg1 from '@/assets/images/section-faq-startseite-1.png'
import faqImg2 from '@/assets/images/section-faq-startseite-2.png'
import faqImg3 from '@/assets/images/section-faq-startseite-3.png'
import faqImg4 from '@/assets/images/section-faq-startseite-4.png'
import faqImg5 from '@/assets/images/section-faq-startseite-5.png'
import faqImg6 from '@/assets/images/section-faq-startseite-6.png'

interface FAQItem {
  title: string;
  description: string;
  image: ImageMetadata;
}

interface Props {
  heading?: string;
  subtitle?: string;
  faqItems?: FAQItem[];
  ctaText?: string;
  showCTA?: boolean;
}

const defaultFaqItems: FAQItem[] = [
  {
    title: 'Gibt es Vorurteile?',
    description:
      'Nein. Wir helfen ohne Vorurteile und ohne Bewertung. Ihre Situation ist vertraulich und wir behandeln Sie respektvoll.',
    image: faqImg1,
  },
  {
    title: 'Wie diskret ist der Einsatz?',
    description:
      'Wir kommen in neutralen Fahrzeugen ohne Werbung und arbeiten diskret und anonym. Niemand wird erfahren, dass Sie uns beauftragt haben.',
    image: faqImg2,
  },
  {
    title: 'Muss ich selbst vor Ort sein?',
    description:
      'Nein, Sie müssen nicht anwesend sein. Wir erledigen alles zuverlässig und halten Sie auf dem Laufenden.',
    image: faqImg3,
  },
  {
    title: 'Was tun Sie gegen Gerüche?',
    description:
      'Bei starken Gerüchen setzen wir spezielle Geruchsneutralisationen ein, um die Luft zu reinigen und schlechte Gerüche nachhaltig zu reduzieren.',
    image: faqImg4,
  },
  {
    title: 'Wie lange dauert die Entrümpelung?',
    description:
      'Das hängt von der Größe und dem Zustand der Wohnung ab. In vielen Fällen sind wir innerhalb von 1–3 Tagen fertig.',
    image: faqImg5,
  },
  {
    title: 'Helfen Sie auch bei sehr schwierigen Situationen?',
    description:
      'Ja, auch bei sehr stark belasteten Wohnungen sind wir spezialisiert. Wir kennen uns mit Geruchsbekämpfung, Desinfektion und Schadensbeseitigung aus.',
    image: faqImg6,
  },
]

const {
  heading = 'Häufige Fragen zur Messie-Hilfe',
  subtitle = 'Diskret, transparent und ohne Bewertung – hier finden Sie Antworten auf die wichtigsten Fragen.',
  faqItems = defaultFaqItems,
  ctaText = 'Ihre Frage ist noch offen?',
  showCTA = true
} = Astro.props;
---

<section
  id="faq-section"
  class="section-bg flex items-center py-8 md:py-10 lg:py-12"
>
  <div class="container relative mx-auto px-4 w-full">
    <div class="max-w-[90%] mx-auto text-center relative z-10">
      <h2
        class="text-xl md:text-3xl lg:text-3xl xl:text-4xl 2xl:text-5xl min-[1920px]:text-6xl font-bold leading-tight"
      >
        {heading}
      </h2>

      <div
        class="mt-4 text-sm md:text-base lg:text-base xl:text-lg 2xl:text-xl min-[1920px]:text-2xl opacity-80 leading-relaxed"
      >
        <h3>{subtitle}</h3>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 md:gap-4 mt-8 lg:mt-12">
      {
        faqItems.map((faq) => (
          <FAQCard
            title={faq.title}
            description={faq.description}
            image={faq.image}
          />
        ))
      }
    </div>

    {showCTA && <SectionCTA topText={ctaText} />}
  </div>

  <style>
    .section-bg {
      background:
        url('/images/background.webp') left 80% / cover no-repeat,
        var(--color-warm-100);
      position: relative;
    }

    .check-wrapper {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 1rem;
      height: 1rem;
      border-radius: 50%;
      background-color: var(--color-warm-150);
      color: var(--color-bronze-accent);
    }

    @media (min-width: 768px) {
      .check-wrapper {
        width: 1.25rem;
        height: 1.25rem;
      }
    }

    @media (min-width: 1024px) {
      .check-wrapper {
        width: 1.25rem;
        height: 1.25rem;
      }
    }

    @media (min-width: 1280px) {
      .check-wrapper {
        width: 1.5rem;
        height: 1.5rem;
      }
    }

    @media (min-width: 1920px) {
      .check-wrapper {
        width: 1.75rem;
        height: 1.75rem;
      }
    }

    .section-image::after {
      content: '';
      inset: -8rem;
      bottom: -16%;
      position: absolute;
      background: url('/images/section-start.webp') center / contain no-repeat;
    }

    @media (max-width: 1023px) {
      .section-bg {
        background:
          url('/images/background.webp') left / cover no-repeat,
          var(--color-warm-100);
      }

      .section-image::after {
        inset: -3rem;
        right: -1rem;
        top: -50%;
      }
    }

    @media (min-width: 1024px) and (orientation: landscape) {
      #faq-section {
        min-height: calc(100vh - 7rem);
      }
    }

    @media (max-width: 1023px), (orientation: portrait) {
      #faq-section {
        min-height: auto;
      }
    }

    @media (max-width: 768px) and (orientation: portrait) {
      .section-image::after {
        inset: -3rem;
        top: -50%;
      }
    }

    @media (max-height: 600px) and (orientation: landscape) {
      #faq-section {
        min-height: auto;
      }
    }
  </style>
</section>
