---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import ContactForm from '../../components/ContactForm.astro';
import { SITE_URL, CONTACT_API_ENDPOINT } from '../../config/site';
import '../../styles/global.css';
---

<BaseLayout
	title="Kostenloses Angebot anfordern – Messie-Hilfe"
	description="Fordern Sie jetzt Ihr kostenloses, unverbindliches Angebot für unsere diskrete Messie-Hilfe an. Professionell, zuverlässig und ohne Bewertung."
	canonicalUrl={`${SITE_URL}/anfrage`}
>
	<Header slot="header" />

	<main class="bg-surface-primary py-12 md:py-20">
		<div class="container mx-auto px-4 max-w-3xl">
			<!-- Page Header -->
			<div class="text-center mb-12">
				<h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4">
					Kostenloses Angebot anfordern
				</h1>
				<p class="text-lg md:text-xl opacity-80 max-w-2xl mx-auto">
					Füllen Sie das Formular aus und wir melden uns schnellstmöglich bei Ihnen mit einem unverbindlichen Angebot für unsere diskrete Messie-Hilfe.
				</p>
			</div>

			<!-- Contact Form -->
			<div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
				<ContactForm contactApiEndpoint={CONTACT_API_ENDPOINT} />
			</div>

			<!-- Additional Information -->
			<div class="mt-12 text-center">
				<div class="bg-surface-tertiary rounded-lg p-6 md:p-8 border border-border-primary">
					<h2 class="text-xl md:text-2xl font-bold mb-4">
						Warum Messie-Hilfe?
					</h2>
					<div class="grid md:grid-cols-2 gap-6 text-left">
						<div class="flex items-start space-x-3">
							<svg class="w-6 h-6 shrink-0 mt-1" style="color: #bca99f;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
							</svg>
							<div>
								<h3 class="font-semibold mb-1">Diskret & Anonym</h3>
								<p class="opacity-80 text-sm">Keine Logos am Fahrzeug, diskrete Anfahrt</p>
							</div>
						</div>
						<div class="flex items-start space-x-3">
							<svg class="w-6 h-6 shrink-0 mt-1" style="color: #bca99f;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
							</svg>
							<div>
								<h3 class="font-semibold mb-1">Ohne Bewertung</h3>
								<p class="opacity-80 text-sm">Professionelle Unterstützung ohne Urteil</p>
							</div>
						</div>
						<div class="flex items-start space-x-3">
							<svg class="w-6 h-6 shrink-0 mt-1" style="color: #bca99f;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
							</svg>
							<div>
								<h3 class="font-semibold mb-1">Kurzfristig verfügbar</h3>
								<p class="opacity-80 text-sm">Schnelle Terminvereinbarung möglich</p>
							</div>
						</div>
						<div class="flex items-start space-x-3">
							<svg class="w-6 h-6 shrink-0 mt-1" style="color: #bca99f;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
							</svg>
							<div>
								<h3 class="font-semibold mb-1">Über 20 Jahre Erfahrung</h3>
								<p class="opacity-80 text-sm">Erprobte Methoden und bewährte Abläufe</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>

	<Footer slot="footer" />
</BaseLayout>

<!-- Track funnel_start event on page view -->
<script is:inline define:vars={{ isDev: import.meta.env.DEV }}>
	(function() {
		if (typeof window === 'undefined' || !window.dataLayer) {
			if (isDev) console.warn('[Tracking] dataLayer not available - funnel_start tracking disabled');
			return;
		}
		
		// Fire funnel_start event with funnel_type: 'offer_request' on page view
		if (isDev) {
			console.log('[Tracking] ✅ Firing funnel_start event for offer_request');
			console.log('[Tracking] Event data:', { event: 'funnel_start', funnel_type: 'offer_request' });
		}
		
		window.dataLayer.push({
			'event': 'funnel_start',
			'funnel_type': 'offer_request'
		});
	})();
</script>

