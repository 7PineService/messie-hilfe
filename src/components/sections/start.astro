---
import { Checkmark } from '@/components/icons'
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'
import defaultImage from '@/assets/images/section-start.webp'

interface Props {
  heading?: string;
  subtitle?: string;
  bulletPoints?: string[];
  closingText?: string;
  image?: ImageMetadata;
}

const {
  heading = 'So helfen wir bei Messie-Wohnungen',
  subtitle = 'Eine Messie-Wohnung ist keine Einzelsituation - wir verstehen die Herausforderungen und helfen Ihnen diskret und respektvoll aus einer Hand: von der Entrümpelung bis zur Reinigung und Wiederherstellung der Wohnung.',
  bulletPoints = [
    '<strong>Diskrete Hilfe</strong> ohne <strong>Vorurteile</strong>',
    '<strong>Entrümpelung & Reinigung</strong> aus einer Hand',
    '<strong>Fester Ablauf</strong>, transparenter <strong>Festpreis</strong>',
    '<strong>Individuell</strong> - vom Einzelraum bis zur gesamten Wohnung'
  ],
  closingText = 'Wir arbeiten zuverlässig, diskret und passen den Ablauf individuell an Ihre Situation an - ohne Bewertung und ohne versteckte Kosten.',
  image = defaultImage
} = Astro.props;
---

<section
  id="start-section"
  class="section-bg flex items-center pt-8 pb-4 md:py-10 lg:py-12"
>
  <div class="container mx-auto px-4 w-full">
    <div
      class="max-w-[90%] mx-auto text-center relative z-10 "
    >
      <h2
        class="text-xl md:text-3xl lg:text-3xl xl:text-4xl 2xl:text-5xl min-[1920px]:text-6xl font-bold leading-tight"
      >
        {heading}
      </h2>

      <div
        class="mt-4 text-sm md:text-base lg:text-base xl:text-lg 2xl:text-xl min-[1920px]:text-2xl opacity-80 leading-relaxed"
      >
        <h3>
          {subtitle}
        </h3>
      </div>
    </div>

    <div class="grid md:grid-cols-2 items-center gap-8 mt-4 md:mt-8">
      <div class="flex items-center justify-center">
        <Image
          src={image}
          alt={heading}
          class="w-full h-auto max-w-md md:max-w-none object-contain"
          widths={[400, 600, 800]}
          sizes="(max-width: 768px) 400px, 50vw"
        />
      </div>

      <div class="space-y-3 md:space-y-6 px-4 md:px-0 mt-6 md:mt-0">
        {bulletPoints.map((point) => (
          <div
            class="flex space-x-2 md:space-x-3 lg:space-x-3 xl:space-x-4 min-[1920px]:space-x-5"
          >
            <span class="check-wrapper shrink-0">
              <Checkmark
                class="check-icon"
                aria-hidden={true}
              />
            </span>
            <span
              class="font-medium text-sm lg:text-sm xl:text-base 2xl:text-lg min-[1920px]:text-xl"
              set:html={point}
            />
          </div>
        ))}
        <div
          class="md:max-w-[76%] mt-6 md:mt-0 lg:pt-4 text-sm lg:text-sm xl:text-base 2xl:text-lg min-[1920px]:text-xl opacity-80 leading-relaxed"
        >
          <p class="">
            {closingText}
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .section-bg {
    background:
      url('/images/background.webp') left 80% / cover no-repeat,
      var(--color-surface-primary);
    position: relative;
  }

  .check-wrapper {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1rem;
    height: 1rem;
    border-radius: 50%;
    background-color: var(--color-surface-warm-peach);
    color: var(--color-accent-bronze);
  }

  @media (min-width: 768px) {
    .check-wrapper {
      width: 1.25rem;
      height: 1.25rem;
    }
  }

  @media (min-width: 1024px) {
    .check-wrapper {
      width: 1.25rem;
      height: 1.25rem;
    }
  }

  @media (min-width: 1280px) {
    .check-wrapper {
      width: 1.5rem;
      height: 1.5rem;
    }
  }

  @media (min-width: 1920px) {
    .check-wrapper {
      width: 1.75rem;
      height: 1.75rem;
    }
  }

  @media (max-width: 1023px) {
    .section-bg {
      background:
        url('/images/background.webp') left / cover no-repeat,
        var(--color-surface-primary);
    }
  }

  @media (min-width: 1024px) and (orientation: landscape) {
    #start-section {
      min-height: calc(100vh - 7rem);
    }
  }

  @media (max-width: 1023px), (orientation: portrait) {
    #start-section {
      min-height: auto;
    }
  }

  @media (max-height: 600px) and (orientation: landscape) {
    #start-section {
      min-height: auto;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const setStartSectionHeight = () => {
      const header = document.getElementById('main-header')
      const startSection = document.getElementById('start-section')

      if (!header || !startSection) return

      const isLandscape = window.matchMedia('(orientation: landscape)').matches
      const isDesktop = window.innerWidth >= 1024
      const isTallEnough = window.innerHeight >= 600

      if (isDesktop && isLandscape && isTallEnough) {
        const headerHeight = header.offsetHeight
        startSection.style.minHeight = `calc(100vh - ${headerHeight}px)`
      } else {
        startSection.style.minHeight = 'auto'
      }
    }

    setStartSectionHeight()

    window.addEventListener('resize', setStartSectionHeight)
    window.addEventListener('orientationchange', () => {
      setTimeout(setStartSectionHeight, 100)
    })
  })
</script>
