---
import { cn } from '@/utils/cn'
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'

interface Props {
  title: string
  classes?: string
  description: string[]
  image: ImageMetadata
}
const { title, classes, description, image } = Astro.props
---

<>
  <div
    class={cn(
      classes,
      'who-card relative hidden md:flex flex-col items-center text-center gap-2 transition px-4 pb-6 md:px-8 lg:px-4 rounded-xl shadow-lg'
    )}
  >
    <div class="w-full">
      <Image src={image} alt={title} loading="eager" decoding="async" class={'mx-auto'} />
    </div>
    <h4
      class="md:text-xl lg:text-lg xl:text-xl 2xl:text-2xl min-[1920px]:text-3xl font-semibold leading-tight mb-2"
    >
      {title}
    </h4>
    <div
      class="w-full pl-2 md:pl-4 lg:pl-2 xl:pl-4 text-xs sm:text-sm md:text-base xl:text-base 2xl:text-lg min-[1920px]:text-xl opacity-80 leading-relaxed  text-left text-justify"
    >
      {
        description.map((d) => (
          <div class="who-descriptions w-fit relative">{d}</div>
        ))
      }
    </div>
  </div>

  <div
    class="who-card-mobile md:hidden grid grid-cols-5 transition rounded-lg p-0"
  >
    <div
      class="card-img relative col-span-2 flex justify-center transition rounded-l-lg"
    >
      <Image class="object-contain" src={image} alt={title} loading="eager" decoding="async" />
    </div>
    <div class="col-span-3 flex flex-col items-start gap-2 p-4 sm:p-4">
      <h4
        class="text-sm sm:text-lg md:text-xl font-semibold leading-tight sm:mb-2 "
      >
        {title}
      </h4>
      <div
        class="text-[10px] sm:text-sm sm:tracking-normal opacity-80 leading-relaxed  text-justify"
      >
        {
          description.map((d) => (
            <div class="who-descriptions relative mx-auto">{d}</div>
          ))
        }
      </div>
    </div>
  </div>
</>

<style>
  .who-card {
    background: var(--color-warm-25);
  }
  .who-card-mobile {
    background: var(--color-warm-25);
    box-shadow: var(--shadow-card);
  }

  .who-card-mobile > .card-img {
    background: var(--gradient-hero);
  }

  .who-card:hover,
  .who-card-mobile:hover {
    background: var(--color-warm-150);
    box-shadow:
      var(--shadow-peach) 1px 0px 2px 2px,
      var(--shadow-peach) -7px 0px 2px -4px,
      var(--shadow-peach) 1px 2px 2px 2px;
    z-index: 1;
  }

  .who-card-mobile:hover > .card-img {
    background: var(--gradient-section);
  }

  .who-descriptions::after {
    content: '';
    position: absolute;
    width: 6px;
    aspect-ratio: 1/1;
    top: 0;
    left: -1rem;
    transform: translate(0, 160%);
    border-radius: 50%;
    background: var(--shadow-peach);
  }

  @media (max-width: 640px) {
    .who-descriptions::after {
      width: 3px;
      top: 3px;
      left: -0.6rem;
    }
  }
</style>
